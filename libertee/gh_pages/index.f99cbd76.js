!function(){
/*@license twgl.js 4.19.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
  Available via the MIT license.
  see: http://github.com/greggman/twgl.js for details*/
let e=Float32Array;function t(t,r,n){const o=new e(3);return t&&(o[0]=t),r&&(o[1]=r),n&&(o[2]=n),o}function r(t,r,n){return(n=n||new e(3))[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n}function n(t,r,n){return(n=n||new e(3))[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n}let o=Float32Array;function i(e){return(e=e||new o(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t){t=t||new o(16);const r=e[0],n=e[1],i=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],m=e[9],d=e[10],p=e[11],b=e[12],y=e[13],h=e[14],x=e[15],g=d*x,v=h*p,E=l*x,F=h*c,A=l*p,w=d*c,P=i*x,T=h*a,_=i*p,z=d*a,S=i*c,R=l*a,I=f*y,C=b*m,M=u*y,U=b*s,B=u*m,L=f*s,k=r*y,O=b*n,D=r*m,W=f*n,j=r*s,G=u*n,$=g*s+F*m+A*y-(v*s+E*m+w*y),X=v*n+P*m+z*y-(g*n+T*m+_*y),N=E*n+T*s+S*y-(F*n+P*s+R*y),V=w*n+_*s+R*m-(A*n+z*s+S*m),H=1/(r*$+u*X+f*N+b*V);return t[0]=H*$,t[1]=H*X,t[2]=H*N,t[3]=H*V,t[4]=H*(v*u+E*f+w*b-(g*u+F*f+A*b)),t[5]=H*(g*r+T*f+_*b-(v*r+P*f+z*b)),t[6]=H*(F*r+P*u+R*b-(E*r+T*u+S*b)),t[7]=H*(A*r+z*u+S*f-(w*r+_*u+R*f)),t[8]=H*(I*c+U*p+B*x-(C*c+M*p+L*x)),t[9]=H*(C*a+k*p+W*x-(I*a+O*p+D*x)),t[10]=H*(M*a+O*c+j*x-(U*a+k*c+G*x)),t[11]=H*(L*a+D*c+G*p-(B*a+W*c+j*p)),t[12]=H*(M*d+L*h+C*l-(B*h+I*l+U*d)),t[13]=H*(D*h+I*i+O*d-(k*d+W*h+C*i)),t[14]=H*(k*l+G*h+U*i-(j*h+M*i+O*l)),t[15]=H*(j*d+B*i+W*l-(D*l+G*d+L*i)),t}function u(e,r,n){n=n||t();const o=r[0],i=r[1],a=r[2],u=o*e[3]+i*e[7]+a*e[11]+e[15];return n[0]=(o*e[0]+i*e[4]+a*e[8]+e[12])/u,n[1]=(o*e[1]+i*e[5]+a*e[9]+e[13])/u,n[2]=(o*e[2]+i*e[6]+a*e[10]+e[14])/u,n}function s(e,r,n){n=n||t();const o=r[0],i=r[1],a=r[2];return n[0]=o*e[0]+i*e[4]+a*e[8],n[1]=o*e[1]+i*e[5]+a*e[9],n[2]=o*e[2]+i*e[6]+a*e[10],n}const l=5120,c=5121,f=5122,m=5123,d=5124,p=5125,b=5126,y={};{const e=y;e[5120]=Int8Array,e[5121]=Uint8Array,e[5122]=Int16Array,e[5123]=Uint16Array,e[5124]=Int32Array,e[5125]=Uint32Array,e[5126]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function h(e){if(e instanceof Int8Array)return l;if(e instanceof Uint8Array)return c;if(e instanceof Uint8ClampedArray)return c;if(e instanceof Int16Array)return f;if(e instanceof Uint16Array)return m;if(e instanceof Int32Array)return d;if(e instanceof Uint32Array)return p;if(e instanceof Float32Array)return b;throw new Error("unsupported typed array type")}function x(e){if(e===Int8Array)return l;if(e===Uint8Array)return c;if(e===Uint8ClampedArray)return c;if(e===Int16Array)return f;if(e===Uint16Array)return m;if(e===Int32Array)return d;if(e===Uint32Array)return p;if(e===Float32Array)return b;throw new Error("unsupported typed array type")}function g(e){const t=y[e];if(!t)throw new Error("unknown gl type");return t}const v="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function E(...e){console.error(...e)}function F(...e){console.warn(...e)}function A(e,t){return"undefined"!=typeof WebGLRenderbuffer&&t instanceof WebGLRenderbuffer}function w(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const P=34962,T={attribPrefix:""};function _(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||35044)}function z(e,t,r,n){if(o=t,"undefined"!=typeof WebGLBuffer&&o instanceof WebGLBuffer)return t;var o;r=r||P;const i=e.createBuffer();return _(e,r,i,t,n),i}function S(e){return"indices"===e}function R(e){return e.length?e:e.data}const I=/coord|texture/i,C=/color|colour/i;function M(e,t){let r;if(r=I.test(e)?2:C.test(e)?4:3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function U(e,t){return e.numComponents||e.size||M(t,R(e).length)}function B(e,t){if(v(e))return e;if(v(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(r=S(t)?Uint16Array:Float32Array),new r(e.data)}function L(e,t){const r={};return Object.keys(t).forEach((function(n){if(!S(n)){const i=t[n],a=i.attrib||i.name||i.attribName||T.attribPrefix+n;if(i.value){if(!Array.isArray(i.value)&&!v(i.value))throw new Error("array.value is not array or typedarray");r[a]={value:i.value}}else{let t,u,s,l;if(i.buffer&&i.buffer instanceof WebGLBuffer)t=i.buffer,l=i.numComponents||i.size,u=i.type,s=i.normalize;else if("number"==typeof i||"number"==typeof i.data){const r=i.data||i,a=i.type||Float32Array,c=r*a.BYTES_PER_ELEMENT;u=x(a),s=void 0!==i.normalize?i.normalize:(o=a)===Int8Array||o===Uint8Array,l=i.numComponents||i.size||M(n,r),t=e.createBuffer(),e.bindBuffer(P,t),e.bufferData(P,c,i.drawType||35044)}else{const r=B(i,n);t=z(e,r,void 0,i.drawType),u=h(r),s=void 0!==i.normalize?i.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(r),l=U(i,n)}r[a]={buffer:t,numComponents:l,type:u,normalize:s,stride:i.stride||0,offset:i.offset||0,divisor:void 0===i.divisor?void 0:i.divisor,drawType:i.drawType}}}var o})),e.bindBuffer(P,null),r}const k=["position","positions","a_position"];function O(e,t,r){const n=L(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);const i=t.indices;if(i){const t=B(i,"indices");o.indices=z(e,t,34963),o.numElements=t.length,o.elementType=h(t)}else o.numElements||(o.numElements=function(e,t){let r,n;for(n=0;n<k.length&&(r=k[n],!(r in t))&&(r=T.attribPrefix+r,!(r in t));++n);n===k.length&&(r=Object.keys(t)[0]);const o=t[r];e.bindBuffer(P,o.buffer);const i=e.getBufferParameter(P,34660);var a;e.bindBuffer(P,null);const u=i/(5120===(a=o.type)||5121===a?1:5122===a||5123===a?2:5124===a||5125===a||5126===a?4:0),s=o.numComponents||o.size,l=u/s;if(l%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return l}(e,o.attribs));return o}function D(e,t,r){const n="indices"===r?34963:P;return z(e,B(t,r),n)}function W(e,t){const r={};return Object.keys(t).forEach((function(n){r[n]=D(e,t[n],n)})),t.indices?(r.numElements=t.indices.length,r.elementType=h(B(t.indices))):r.numElements=function(e){let t,r;for(r=0;r<k.length&&(t=k[r],!(t in e));++r);r===k.length&&(t=Object.keys(e)[0]);const n=e[t],o=R(n).length,i=U(n,t),a=o/i;if(o%i>0)throw new Error(`numComponents ${i} not correct for length ${o}`);return a}(t),r}function j(e,t){let r=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const n=arguments[t];if(n instanceof Array||v(n))for(let t=0;t<n.length;++t)e[r++]=n[t];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function G(e,t,r){return j(new(r||Float32Array)(e*t),e)}function $(e,t,r){const n=e.length,o=new Float32Array(3);for(let i=0;i<n;i+=3)r(t,[e[i],e[i+1],e[i+2]],o),e[i]=o[0],e[i+1]=o[1],e[i+2]=o[2]}function X(e,r,n){n=n||t();const o=r[0],i=r[1],a=r[2];return n[0]=o*e[0]+i*e[1]+a*e[2],n[1]=o*e[4]+i*e[5]+a*e[6],n[2]=o*e[8]+i*e[9]+a*e[10],n}function N(e,t){return $(e,t,s),e}function V(e,t){return $(e,a(t),X),e}function H(e,t){return $(e,t,u),e}function Y(e,t){return Object.keys(e).forEach((function(r){const n=e[r];r.indexOf("pos")>=0?H(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?N(n,t):r.indexOf("norm")>=0&&V(n,t)})),e}function q(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function K(e,t,r,n,o){e=e||1,t=t||1,r=r||1,n=n||1,o=o||i();const a=(r+1)*(n+1),u=G(3,a),s=G(3,a),l=G(2,a);for(let o=0;o<=n;o++)for(let i=0;i<=r;i++){const a=i/r,c=o/n;u.push(e*a-.5*e,0,t*c-.5*t),s.push(0,1,0),l.push(a,c)}const c=r+1,f=G(3,r*n*2,Uint16Array);for(let e=0;e<n;e++)for(let t=0;t<r;t++)f.push((e+0)*c+t,(e+1)*c+t,(e+0)*c+t+1),f.push((e+1)*c+t,(e+1)*c+t+1,(e+0)*c+t+1);return Y({position:u,normal:s,texcoord:l,indices:f},o)}function Z(e,t,r,n,o,i,a){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,i=i||0;const u=(o=o||Math.PI)-n,s=(a=a||2*Math.PI)-i,l=(t+1)*(r+1),c=G(3,l),f=G(3,l),m=G(2,l);for(let o=0;o<=r;o++)for(let a=0;a<=t;a++){const l=a/t,d=o/r,p=s*l+i,b=u*d+n,y=Math.sin(p),h=Math.cos(p),x=Math.sin(b),g=h*x,v=Math.cos(b),E=y*x;c.push(e*g,e*v,e*E),f.push(g,v,E),m.push(1-l,d)}const d=t+1,p=G(3,t*r*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<r;t++)p.push((t+0)*d+e,(t+0)*d+e+1,(t+1)*d+e),p.push((t+1)*d+e,(t+0)*d+e+1,(t+1)*d+e+1);return{position:c,normal:f,texcoord:m,indices:p}}const J=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Q(e){const t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],i=G(3,24),a=G(3,24),u=G(2,24),s=G(3,12,Uint16Array);for(let e=0;e<6;++e){const t=J[e];for(let s=0;s<4;++s){const l=r[t[s]],c=n[e],f=o[s];i.push(l),a.push(c),u.push(f)}const l=4*e;s.push(l+0,l+1,l+2),s.push(l+0,l+2,l+3)}return{position:i,normal:a,texcoord:u,indices:s}}function ee(e,t,r,n,o,i,a){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const u=void 0===i||i,s=void 0===a||a,l=(u?2:0)+(s?2:0),c=(n+1)*(o+1+l),f=G(3,c),m=G(3,c),d=G(2,c),p=G(3,n*(o+l/2)*2,Uint16Array),b=n+1,y=Math.atan2(e-t,r),h=Math.cos(y),x=Math.sin(y),g=o+(s?2:0);for(let i=u?-2:0;i<=g;++i){let a,u=i/o,s=r*u;i<0?(s=0,u=1,a=e):i>o?(s=r,u=1,a=t):a=e+i/o*(t-e),-2!==i&&i!==o+2||(a=0,u=0),s-=r/2;for(let e=0;e<b;++e){const t=Math.sin(e*Math.PI*2/n),r=Math.cos(e*Math.PI*2/n);f.push(t*a,s,r*a),i<0?m.push(0,-1,0):i>o?m.push(0,1,0):0===a?m.push(0,0,0):m.push(t*h,x,r*h),d.push(e/n,1-u)}}for(let e=0;e<o+l;++e)if(!(1===e&&u||e===o+l-2&&s))for(let t=0;t<n;++t)p.push(b*(e+0)+0+t,b*(e+0)+1+t,b*(e+1)+1+t),p.push(b*(e+0)+0+t,b*(e+1)+1+t,b*(e+1)+0+t);return{position:f,normal:m,texcoord:d,indices:p}}function te(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const o=e[n],i=e.slice(n+1,n+4);i.push.apply(i,t);for(let e=0;e<o;++e)r.push.apply(r,i)}return r}function re(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=te([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=te([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:G(3,n),texcoord:G(2,n),normal:G(3,n),color:G(4,n,Uint8Array),indices:G(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(let e=0;e<n;++e)o.indices.push(e);return o}function ne(e,t,o,i,a,u,s){if(a<=0)throw new Error("subdivisionDown must be > 0");const l=(s=s||1)-(u=u||0),c=2*(a+1)*4,f=G(3,c),m=G(3,c),d=G(2,c);function p(e,t,r){return e+(t-e)*r}function b(t,o,s,c,b,y){for(let h=0;h<=a;h++){const x=o/1,g=h/a,v=2*(x-.5),E=(u+g*l)*Math.PI,F=Math.sin(E),A=Math.cos(E),w=p(e,t,F),P=v*i,T=A*e,_=F*w;f.push(P,T,_);const z=r(n([0,F,A],s),c);m.push(z),d.push(x*b+y,g)}}for(let e=0;e<2;e++){const r=2*(e/1-.5);b(t,e,[1,1,1],[0,0,0],1,0),b(t,e,[0,0,0],[r,0,0],0,0),b(o,e,[1,1,1],[0,0,0],1,0),b(o,e,[0,0,0],[r,0,0],0,1)}const y=G(3,2*a*4,Uint16Array);function h(e,t){for(let r=0;r<a;++r)y.push(e+r+0,e+r+1,t+r+0),y.push(e+r+1,t+r+1,t+r+0)}const x=a+1;return h(0*x,4*x),h(5*x,7*x),h(6*x,2*x),h(3*x,1*x),{position:f,normal:m,texcoord:d,indices:y}}function oe(e,t,r,n,o,i){return ee(e,e,t,r,n,o,i)}function ie(e,t,r,n,o,i){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const a=(i=i||2*Math.PI)-o,u=r+1,s=n+1,l=u*s,c=G(3,l),f=G(3,l),m=G(2,l),d=G(3,r*n*2,Uint16Array);for(let i=0;i<s;++i){const s=i/n,l=s*Math.PI*2,d=Math.sin(l),p=e+d*t,b=Math.cos(l),y=b*t;for(let e=0;e<u;++e){const t=e/r,n=o+t*a,i=Math.sin(n),u=Math.cos(n),l=i*p,h=u*p,x=i*d,g=u*d;c.push(l,y,h),f.push(x,b,g),m.push(t,1-s)}}for(let e=0;e<n;++e)for(let t=0;t<r;++t){const r=1+t,n=1+e;d.push(u*e+t,u*n+t,u*e+r),d.push(u*n+t,u*n+r,u*e+r)}return{position:c,normal:f,texcoord:m,indices:d}}function ae(e,t,r,n,o){if(t<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;const i=(t+1)*((r=r||1)+1),a=G(3,i),u=G(3,i),s=G(2,i),l=G(3,r*t*2,Uint16Array);let c=0;const f=e-n,m=t+1;for(let e=0;e<=r;++e){const i=n+f*Math.pow(e/r,o);for(let n=0;n<=t;++n){const o=2*Math.PI*n/t,f=i*Math.cos(o),d=i*Math.sin(o);if(a.push(f,0,d),u.push(0,1,0),s.push(1-n/t,e/r),e>0&&n!==t){const e=c+(n+1),t=c+n,r=c+n-m,o=c+(n+1)-m;l.push(e,t,r),l.push(e,r,o)}}c+=t+1}return{position:a,normal:u,texcoord:s,indices:l}}function ue(e){return function(t){const r=e.apply(this,Array.prototype.slice.call(arguments,1));return W(t,r)}}function se(e){return function(t){const r=e.apply(null,Array.prototype.slice.call(arguments,1));return O(t,r)}}se(re),ue(re),se(Q),ue(Q),se(K),ue(K),se(Z),ue(Z),se(ee),ue(ee),se(q),ue(q),se(ne),ue(ne),se(oe),ue(oe),se(ie),ue(ie),se(ae),ue(ae);function le(e){return!!e.texStorage2D}const ce=function(){const e={},t={};return function(r,n){return function(r){const n=r.constructor.name;if(!e[n]){for(const e in r)if("number"==typeof r[e]){const n=t[r[e]];t[r[e]]=n?`${n} | ${e}`:e}e[n]=!0}}(r),t[n]||("number"==typeof n?`0x${n.toString(16)}`:n)}}();const fe={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},me=v,de=function(){let e;return function(){return e=e||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),pe=6406,be=6407,ye=6408,he=6409,xe=6410,ge=6402,ve=34041,Ee=33071,Fe=3553,Ae=34067,we=32879,Pe=35866,Te=34069,_e=10241,ze=10240,Se=10242,Re=10243,Ie=3317,Ce=5120,Me=5121,Ue=5122,Be=5123,Le=5124,ke=5125,Oe=5126,De=5131,We=36193,je=33640,Ge=33319,$e=33320,Xe=6403,Ne=36244,Ve=36248,He=36249,Ye={};{const e=Ye;e[6406]={numColorComponents:1},e[6409]={numColorComponents:1},e[6410]={numColorComponents:2},e[6407]={numColorComponents:3},e[6408]={numColorComponents:4},e[6403]={numColorComponents:1},e[36244]={numColorComponents:1},e[33319]={numColorComponents:2},e[33320]={numColorComponents:2},e[6407]={numColorComponents:3},e[36248]={numColorComponents:3},e[6408]={numColorComponents:4},e[36249]={numColorComponents:4},e[6402]={numColorComponents:1},e[34041]={numColorComponents:2}}let qe;function Ke(e){if(!qe){const e={};e[6406]={textureFormat:pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Me,De,We,Oe]},e[6409]={textureFormat:he,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[Me,De,We,Oe]},e[6410]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[Me,De,We,Oe]},e[6407]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[Me,De,We,Oe,33635]},e[6408]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[Me,De,We,Oe,32819,32820]},e[6402]={textureFormat:ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[ke,Be]},e[33321]={textureFormat:Xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[Me]},e[36756]={textureFormat:Xe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Ce]},e[33325]={textureFormat:Xe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Oe,De]},e[33326]={textureFormat:Xe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Oe]},e[33330]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Me]},e[33329]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ce]},e[33332]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Be]},e[33331]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ue]},e[33334]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ke]},e[33333]={textureFormat:Ne,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Le]},e[33323]={textureFormat:Ge,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[Me]},e[36757]={textureFormat:Ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Ce]},e[33327]={textureFormat:Ge,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Oe,De]},e[33328]={textureFormat:Ge,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Oe]},e[33336]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Me]},e[33335]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ce]},e[33338]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Be]},e[33337]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ue]},e[33340]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ke]},e[33339]={textureFormat:$e,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Le]},e[32849]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[Me]},e[35905]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Me]},e[36194]={textureFormat:be,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[Me,33635]},e[36758]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ce]},e[35898]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Oe,De,35899]},e[35901]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Oe,De,35902]},e[34843]={textureFormat:be,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Oe,De]},e[34837]={textureFormat:be,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Oe]},e[36221]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Me]},e[36239]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ce]},e[36215]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Be]},e[36233]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Ue]},e[36209]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ke]},e[36227]={textureFormat:Ve,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Le]},e[32856]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Me]},e[35907]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Me]},e[36759]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Ce]},e[32855]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[Me,32820,je]},e[32854]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[Me,32819]},e[32857]={textureFormat:ye,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[je]},e[34842]={textureFormat:ye,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Oe,De]},e[34836]={textureFormat:ye,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Oe]},e[36220]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Me]},e[36238]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ce]},e[36975]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[je]},e[36214]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Be]},e[36232]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ue]},e[36226]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Le]},e[36208]={textureFormat:He,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ke]},e[33189]={textureFormat:ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Be,ke]},e[33190]={textureFormat:ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ke]},e[36012]={textureFormat:ge,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Oe]},e[35056]={textureFormat:ve,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[34042]},e[36013]={textureFormat:ve,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[36269]},Object.keys(e).forEach((function(t){const r=e[t];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(e,t){const n=r.type[t];r.bytesPerElementMap[n]=e}))})),qe=e}return qe[e]}function Ze(e,t){const r=Ke(e);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function Je(e){const t=Ke(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function Qe(e){return 0==(e&e-1)}function et(e,t,r,n){if(!le(e))return Qe(t)&&Qe(r);const o=Ke(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function tt(e){const t=Ke(e);if(!t)throw"unknown internal format";return t.textureFilterable}function rt(e,t,r){return me(t)?h(t):r||Me}function nt(e,t,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{const e=Math.sqrt(o/(t===Ae?6:1));e%1==0?(r=e,n=e):(r=o,n=1)}return{width:r,height:n}}function ot(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(37443,t.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(37441,t.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(37440,t.flipY)}function it(e){e.pixelStorei(Ie,4),le(e)&&(e.pixelStorei(3314,0),e.pixelStorei(32878,0),e.pixelStorei(3316,0),e.pixelStorei(3315,0),e.pixelStorei(32877,0))}function at(e,t,r,n){var o;n.minMag&&(r.call(e,t,_e,n.minMag),r.call(e,t,ze,n.minMag)),n.min&&r.call(e,t,_e,n.min),n.mag&&r.call(e,t,ze,n.mag),n.wrap&&(r.call(e,t,Se,n.wrap),r.call(e,t,Re,n.wrap),(t===we||(o=t,"undefined"!=typeof WebGLSampler&&o instanceof WebGLSampler))&&r.call(e,t,32882,n.wrap)),n.wrapR&&r.call(e,t,32882,n.wrapR),n.wrapS&&r.call(e,t,Se,n.wrapS),n.wrapT&&r.call(e,t,Re,n.wrapT),n.minLod&&r.call(e,t,33082,n.minLod),n.maxLod&&r.call(e,t,33083,n.maxLod),n.baseLevel&&r.call(e,t,33084,n.baseLevel),n.maxLevel&&r.call(e,t,33085,n.maxLevel)}function ut(e,t,r){const n=r.target||Fe;e.bindTexture(n,t),at(e,n,e.texParameteri,r)}function st(e,t,r,n,o,i){r=r||fe.textureOptions,i=i||ye;const a=r.target||Fe;if(n=n||r.width,o=o||r.height,e.bindTexture(a,t),et(e,n,o,i))e.generateMipmap(a);else{const t=tt(i)?9729:9728;e.texParameteri(a,_e,t),e.texParameteri(a,ze,t),e.texParameteri(a,Se,Ee),e.texParameteri(a,Re,Ee)}}function lt(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function ct(e,t){return(t=t||{}).cubeFaceOrder||[Te,34070,34071,34072,34073,34074]}function ft(e,t){const r=ct(0,t).map((function(e,t){return{face:e,ndx:t}}));return r.sort((function(e,t){return e.face-t.face})),r}function mt(e,t,r,n){const o=(n=n||fe.textureOptions).target||Fe,i=n.level||0;let a=r.width,u=r.height;const s=n.internalFormat||n.format||ye,l=Je(s),c=n.format||l.format,f=n.type||l.type;if(ot(e,n),e.bindTexture(o,t),o===Ae){const l=r.width,m=r.height;let d,p;if(l/6===m)d=m,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(m/6===l)d=l,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(l/3==m/2)d=l/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(l/2!=m/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);d=l/2,p=[0,0,1,0,0,1,1,1,0,2,1,2]}const b=de();b?(b.canvas.width=d,b.canvas.height=d,a=d,u=d,ft(0,n).forEach((function(t){const n=p[2*t.ndx+0]*d,o=p[2*t.ndx+1]*d;b.drawImage(r,n,o,d,d,0,0,d,d),e.texImage2D(t.face,i,s,c,f,b.canvas)})),b.canvas.width=1,b.canvas.height=1):"undefined"!=typeof createImageBitmap&&(a=d,u=d,ft(0,n).forEach((function(l){const m=p[2*l.ndx+0]*d,b=p[2*l.ndx+1]*d;e.texImage2D(l.face,i,s,d,d,0,c,f,null),createImageBitmap(r,m,b,d,d,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){ot(e,n),e.bindTexture(o,t),e.texImage2D(l.face,i,s,c,f,r),lt(n)&&st(e,t,n,a,u,s)}))})))}else if(o===we||o===Pe){const t=Math.min(r.width,r.height),n=Math.max(r.width,r.height),a=n/t;if(a%1!=0)throw"can not compute 3D dimensions of element";const u=r.width===n?1:0,l=r.height===n?1:0;e.pixelStorei(Ie,1),e.pixelStorei(3314,r.width),e.pixelStorei(32878,0),e.pixelStorei(32877,0),e.texImage3D(o,i,s,t,t,t,0,c,f,null);for(let n=0;n<a;++n){const a=n*t*u,s=n*t*l;e.pixelStorei(3316,a),e.pixelStorei(3315,s),e.texSubImage3D(o,i,0,0,n,t,t,1,c,f,r)}it(e)}else e.texImage2D(o,i,s,c,f,r);lt(n)&&st(e,t,n,a,u,s),ut(e,t,n)}function dt(){}function pt(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}(e)?t:"anonymous"}function bt(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function yt(e,t,r){return bt(e)?(setTimeout((function(){r(null,e)})),e):function(e,t,r){let n;if(r=r||dt,t=void 0!==t?t:fe.crossOrigin,t=pt(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);const o=function(){n.removeEventListener("error",i),n.removeEventListener("load",a),n=null},i=function(){const t="couldn't load image: "+e;E(t),r(t,n),o()},a=function(){r(null,n),o()};return n.addEventListener("error",i),n.addEventListener("load",a),n.src=e,n}if("undefined"!=typeof ImageBitmap){let o,i;const a=function(){r(o,i)},u={};t&&(u.mode="cors"),fetch(e,u).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){i=e,setTimeout(a)})).catch((function(e){o=e,setTimeout(a)})),n=null}return n}(e,t,r)}function ht(e,t,r){const n=(r=r||fe.textureOptions).target||Fe;if(e.bindTexture(n,t),!1===r.color)return;const o=function(e){return e=e||fe.textureColor,me(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===Ae)for(let t=0;t<6;++t)e.texImage2D(Te+t,0,ye,1,1,0,ye,Me,o);else n===we||n===Pe?e.texImage3D(n,0,ye,1,1,1,0,ye,Me,o):e.texImage2D(n,0,ye,1,1,0,ye,Me,o)}function xt(e,t,r,n){n=n||dt,r=r||fe.textureOptions,ht(e,t,r);return yt((r=Object.assign({},r)).src,r.crossOrigin,(function(o,i){o?n(o,t,i):(mt(e,t,i,r),n(null,t,i))}))}function gt(e,t,r,n){n=n||dt;const o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const i=r.level||0,a=r.internalFormat||r.format||ye,u=Je(a),s=r.format||u.format,l=r.type||Me,c=r.target||Fe;if(c!==Ae)throw"target must be TEXTURE_CUBE_MAP";ht(e,t,r),r=Object.assign({},r);let f=6;const m=[],d=ct(0,r);let p;p=o.map((function(o,u){return yt(o,r.crossOrigin,(b=d[u],function(o,u){--f,o?m.push(o):u.width!==u.height?m.push("cubemap face img is not a square: "+u.src):(ot(e,r),e.bindTexture(c,t),5===f?ct().forEach((function(t){e.texImage2D(t,i,a,s,l,u)})):e.texImage2D(b,i,a,s,l,u),lt(r)&&e.generateMipmap(c)),0===f&&n(m.length?m:void 0,t,p)}));var b}))}function vt(e,t,r,n){n=n||dt;const o=r.src,i=r.internalFormat||r.format||ye,a=Je(i),u=r.format||a.format,s=r.type||Me,l=r.target||Pe;if(l!==we&&l!==Pe)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";ht(e,t,r),r=Object.assign({},r);let c=o.length;const f=[];let m;const d=r.level||0;let p=r.width,b=r.height;const y=o.length;let h=!0;m=o.map((function(o,a){return yt(o,r.crossOrigin,(x=a,function(o,a){if(--c,o)f.push(o);else{if(ot(e,r),e.bindTexture(l,t),h){h=!1,p=r.width||a.width,b=r.height||a.height,e.texImage3D(l,d,i,p,b,y,0,u,s,null);for(let t=0;t<y;++t)e.texSubImage3D(l,d,0,0,t,p,b,1,u,s,a)}else{let t,r=a;a.width===p&&a.height===b||(t=de(),r=t.canvas,t.canvas.width=p,t.canvas.height=b,t.drawImage(a,0,0,p,b)),e.texSubImage3D(l,d,0,0,x,p,b,1,u,s,r),t&&r===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}lt(r)&&e.generateMipmap(l)}0===c&&n(f.length?f:void 0,t,m)}));var x}))}function Et(e,t,r,n){const o=(n=n||fe.textureOptions).target||Fe;e.bindTexture(o,t);let i=n.width,a=n.height,u=n.depth;const s=n.level||0,l=n.internalFormat||n.format||ye,c=Je(l),f=n.format||c.format,m=n.type||rt(0,r,c.type);if(me(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const e=g(m);r=new e(r)}const d=Ze(l,m),p=r.byteLength/d;if(p%1)throw"length wrong size for format: "+ce(e,f);let b;if(o===we||o===Pe)if(i||a||u)!i||a&&u?!a||i&&u?(b=nt(0,o,i,a,p/u),i=b.width,a=b.height):(b=nt(0,o,i,u,p/a),i=b.width,u=b.height):(b=nt(0,o,a,u,p/i),a=b.width,u=b.height);else{const e=Math.cbrt(p);if(e%1!=0)throw"can't guess cube size of array of numElements: "+p;i=e,a=e,u=e}else b=nt(0,o,i,a,p),i=b.width,a=b.height;if(it(e),e.pixelStorei(Ie,n.unpackAlignment||1),ot(e,n),o===Ae){const t=p/6*(d/r.BYTES_PER_ELEMENT);ft(0,n).forEach((n=>{const o=t*n.ndx,u=r.subarray(o,o+t);e.texImage2D(n.face,s,l,i,a,0,f,m,u)}))}else o===we||o===Pe?e.texImage3D(o,s,l,i,a,u,0,f,m,r):e.texImage2D(o,s,l,i,a,0,f,m,r);return{width:i,height:a,depth:u,type:m}}function Ft(e,t,r){const n=r.target||Fe;e.bindTexture(n,t);const o=r.level||0,i=r.internalFormat||r.format||ye,a=Je(i),u=r.format||a.format,s=r.type||a.type;if(ot(e,r),n===Ae)for(let t=0;t<6;++t)e.texImage2D(Te+t,o,i,r.width,r.height,0,u,s,null);else n===we||n===Pe?e.texImage3D(n,o,i,r.width,r.height,r.depth,0,u,s,null):e.texImage2D(n,o,i,r.width,r.height,0,u,s,null)}function At(e,t,r){r=r||dt,t=t||fe.textureOptions;const n=e.createTexture(),o=t.target||Fe;let i=t.width||1,a=t.height||1;const u=t.internalFormat||ye;e.bindTexture(o,n),o===Ae&&(e.texParameteri(o,Se,Ee),e.texParameteri(o,Re,Ee));let s=t.src;if(s)if("function"==typeof s&&(s=s(e,t)),"string"==typeof s)xt(e,n,t,r);else if(me(s)||Array.isArray(s)&&("number"==typeof s[0]||Array.isArray(s[0])||me(s[0]))){const r=Et(e,n,s,t);i=r.width,a=r.height}else Array.isArray(s)&&("string"==typeof s[0]||bt(s[0]))?o===Ae?gt(e,n,t,r):vt(e,n,t,r):(mt(e,n,s,t),i=s.width,a=s.height);else Ft(e,n,t);return lt(t)&&st(e,n,t,i,a,u),ut(e,n,t),n}const wt=E;function Pt(e){return"undefined"!=typeof document&&document.getElementById?document.getElementById(e):null}const Tt=33984,_t=34962,zt=5126,St=5124,Rt=5125,It=3553,Ct=34067,Mt=32879,Ut=35866,Bt={};function Lt(e,t){return Bt[t].bindPoint}function kt(e,t){return function(r){e.uniform1i(t,r)}}function Ot(e,t){return function(r){e.uniform1iv(t,r)}}function Dt(e,t){return function(r){e.uniform2iv(t,r)}}function Wt(e,t){return function(r){e.uniform3iv(t,r)}}function jt(e,t){return function(r){e.uniform4iv(t,r)}}function Gt(e,t,r,n){const o=Lt(0,t);return le(e)?function(t){let i,a;w(0,t)?(i=t,a=null):(i=t.texture,a=t.sampler),e.uniform1i(n,r),e.activeTexture(Tt+r),e.bindTexture(o,i),e.bindSampler(r,a)}:function(t){e.uniform1i(n,r),e.activeTexture(Tt+r),e.bindTexture(o,t)}}function $t(e,t,r,n,o){const i=Lt(0,t),a=new Int32Array(o);for(let e=0;e<o;++e)a[e]=r+e;return le(e)?function(t){e.uniform1iv(n,a),t.forEach((function(t,n){let o,u;e.activeTexture(Tt+a[n]),w(0,t)?(o=t,u=null):(o=t.texture,u=t.sampler),e.bindSampler(r,u),e.bindTexture(i,o)}))}:function(t){e.uniform1iv(n,a),t.forEach((function(t,r){e.activeTexture(Tt+a[r]),e.bindTexture(i,t)}))}}function Xt(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(_t,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||zt,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Nt(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(_t,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||St,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Vt(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(_t,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Rt,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Ht(e,t,r){const n=r.size,o=r.count;return function(r){e.bindBuffer(_t,r.buffer);const i=r.size||r.numComponents||n,a=i/o,u=r.type||zt,s=Bt[u].size*i,l=r.normalize||!1,c=r.offset||0,f=s/o;for(let n=0;n<o;++n)e.enableVertexAttribArray(t+n),e.vertexAttribPointer(t+n,a,u,l,s,c+f*n),void 0!==r.divisor&&e.vertexAttribDivisor(t+n,r.divisor)}}Bt[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},Bt[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},Bt[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},Bt[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},Bt[5124]={Type:Int32Array,size:4,setter:kt,arraySetter:Ot},Bt[35667]={Type:Int32Array,size:8,setter:Dt},Bt[35668]={Type:Int32Array,size:12,setter:Wt},Bt[35669]={Type:Int32Array,size:16,setter:jt},Bt[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},Bt[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},Bt[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},Bt[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},Bt[35670]={Type:Uint32Array,size:4,setter:kt,arraySetter:Ot},Bt[35671]={Type:Uint32Array,size:8,setter:Dt},Bt[35672]={Type:Uint32Array,size:12,setter:Wt},Bt[35673]={Type:Uint32Array,size:16,setter:jt},Bt[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},Bt[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},Bt[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},Bt[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},Bt[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},Bt[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},Bt[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},Bt[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},Bt[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},Bt[35678]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:It},Bt[35680]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ct},Bt[35679]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Mt},Bt[35682]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:It},Bt[36289]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ut},Bt[36292]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ut},Bt[36293]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ct},Bt[36298]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:It},Bt[36299]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Mt},Bt[36300]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ct},Bt[36303]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ut},Bt[36306]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:It},Bt[36307]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Mt},Bt[36308]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ct},Bt[36311]={Type:null,size:0,setter:Gt,arraySetter:$t,bindPoint:Ut};const Yt={};Yt[5126]={size:4,setter:Xt},Yt[35664]={size:8,setter:Xt},Yt[35665]={size:12,setter:Xt},Yt[35666]={size:16,setter:Xt},Yt[5124]={size:4,setter:Nt},Yt[35667]={size:8,setter:Nt},Yt[35668]={size:12,setter:Nt},Yt[35669]={size:16,setter:Nt},Yt[5125]={size:4,setter:Vt},Yt[36294]={size:8,setter:Vt},Yt[36295]={size:12,setter:Vt},Yt[36296]={size:16,setter:Vt},Yt[35670]={size:4,setter:Nt},Yt[35671]={size:8,setter:Nt},Yt[35672]={size:12,setter:Nt},Yt[35673]={size:16,setter:Nt},Yt[35674]={size:4,setter:Ht,count:2},Yt[35675]={size:9,setter:Ht,count:3},Yt[35676]={size:16,setter:Ht,count:4};const qt=/ERROR:\s*\d+:(\d+)/gi;function Kt(e,t="",r=0){const n=[...t.matchAll(qt)],o=new Map(n.map(((e,r)=>{const o=parseInt(e[1]),i=n[r+1],a=i?i.index:t.length;return[o-1,t.substring(e.index,a)]})));return e.split("\n").map(((e,t)=>{const n=o.get(t);return`${t+1+r}: ${e}${n?`\n\n^^^ ${n}`:""}`})).join("\n")}const Zt=/^[ \t]*\n/;function Jt(e,t,r,n){const o=n||wt,i=e.createShader(r);let a=0;Zt.test(t)&&(a=1,t=t.replace(Zt,"")),e.shaderSource(i,t),e.compileShader(i);if(!e.getShaderParameter(i,35713)){const n=e.getShaderInfoLog(i);return o(`${Kt(t,n,a)}\nError compiling ${ce(e,r)}: ${n}`),e.deleteShader(i),null}return i}function Qt(e,t,r){let n,o;if("function"==typeof t&&(r=t,t=void 0),"function"==typeof e)r=e,e=void 0;else if(e&&!Array.isArray(e)){if(e.errorCallback)return e;const t=e;r=t.errorCallback,e=t.attribLocations,n=t.transformFeedbackVaryings,o=t.transformFeedbackMode}const i={errorCallback:r||wt,transformFeedbackVaryings:n,transformFeedbackMode:o};if(e){let r={};Array.isArray(e)?e.forEach((function(e,n){r[e]=t?t[n]:n})):r=e,i.attribLocations=r}return i}const er=["VERTEX_SHADER","FRAGMENT_SHADER"];function tr(e,t){return t.indexOf("frag")>=0?35632:t.indexOf("vert")>=0?35633:void 0}function rr(e,t){t.forEach((function(t){e.deleteShader(t)}))}function nr(e,t,r,n,o){const i=Qt(r,n,o),a=[],u=[];for(let r=0;r<t.length;++r){let n=t[r];if("string"==typeof n){const t=Pt(n),o=t?t.text:n;let a=e[er[r]];t&&t.type&&(a=tr(0,t.type)||a),n=Jt(e,o,a,i.errorCallback),u.push(n)}s=n,"undefined"!=typeof WebGLShader&&s instanceof WebGLShader&&a.push(n)}var s;if(a.length!==t.length)return i.errorCallback("not enough shaders for program"),rr(e,u),null;const l=e.createProgram();a.forEach((function(t){e.attachShader(l,t)})),i.attribLocations&&Object.keys(i.attribLocations).forEach((function(t){e.bindAttribLocation(l,i.attribLocations[t],t)}));let c=i.transformFeedbackVaryings;c&&(c.attribs&&(c=c.attribs),Array.isArray(c)||(c=Object.keys(c)),e.transformFeedbackVaryings(l,c,i.transformFeedbackMode||35981)),e.linkProgram(l);if(!e.getProgramParameter(l,35714)){const t=e.getProgramInfoLog(l);return i.errorCallback(`${a.map((t=>{const r=Kt(e.getShaderSource(t),"",0),n=e.getShaderParameter(t,e.SHADER_TYPE);return`${ce(e,n)}\n${r}}`})).join("\n")}\nError in program linking: ${t}`),e.deleteProgram(l),rr(e,u),null}return l}function or(e,t,r,n,o){const i=Qt(r,n,o),a=[];for(let r=0;r<t.length;++r){const n=Jt(e,t[r],e[er[r]],i.errorCallback);if(!n)return null;a.push(n)}return nr(e,a,i)}function ir(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function ar(e,t){let r=0;function n(t,n,o){const i=n.name.endsWith("[0]"),a=n.type,u=Bt[a];if(!u)throw new Error(`unknown type: 0x${a.toString(16)}`);let s;if(u.bindPoint){const t=r;r+=n.size,s=i?u.arraySetter(e,a,t,o,n.size):u.setter(e,a,t,o,n.size)}else s=u.arraySetter&&i?u.arraySetter(e,o):u.setter(e,o);return s.location=o,s}const o={},i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const i=e.getActiveUniform(t,r);if(ir(i))continue;let a=i.name;a.endsWith("[0]")&&(a=a.substr(0,a.length-3));const u=e.getUniformLocation(t,i.name);u&&(o[a]=n(0,i,u))}return o}function ur(e,t){const r={},n=e.getProgramParameter(t,35971);for(let o=0;o<n;++o){const n=e.getTransformFeedbackVarying(t,o);r[n.name]={index:o,type:n.type,size:n.size}}return r}function sr(e,t){const r=e.getProgramParameter(t,35718),n=[],o=[];for(let i=0;i<r;++i){o.push(i),n.push({});const r=e.getActiveUniform(t,i);if(ir(r))break;n[i].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){const i=r[0],a=r[1];e.getActiveUniforms(t,o,e[i]).forEach((function(e,t){n[t][a]=e}))}));const i={},a=e.getProgramParameter(t,35382);for(let r=0;r<a;++r){const n=e.getActiveUniformBlockName(t,r),o={index:e.getUniformBlockIndex(t,n),usedByVertexShader:e.getActiveUniformBlockParameter(t,r,35396),usedByFragmentShader:e.getActiveUniformBlockParameter(t,r,35398),size:e.getActiveUniformBlockParameter(t,r,35392),uniformIndices:e.getActiveUniformBlockParameter(t,r,35395)};o.used=o.usedByVertexShader||o.usedByFragmentShader,i[n]=o}return{blockSpecs:i,uniformData:n}}function lr(e,t){const r=e.uniformSetters||e,n=arguments.length;for(let e=1;e<n;++e){const t=arguments[e];if(Array.isArray(t)){const e=t.length;for(let n=0;n<e;++n)lr(r,t[n])}else for(const e in t){const n=r[e];n&&n(t[e])}}}function cr(e,t){const r={},n=e.getProgramParameter(t,35721);for(let o=0;o<n;++o){const n=e.getActiveAttrib(t,o);if(ir(n))continue;const i=e.getAttribLocation(t,n.name),a=Yt[n.type],u=a.setter(e,i,a);u.location=i,r[n.name]=u}return r}function fr(e,t){for(const r in t){const n=e[r];n&&n(t[r])}}function mr(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(fr(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(34963,r.indices))}function dr(e,t){const r={program:t,uniformSetters:ar(e,t),attribSetters:cr(e,t)};return le(e)&&(r.uniformBlockSpec=sr(e,t),r.transformFeedbackInfo=ur(e,t)),r}function pr(e,t,r,n,o){const i=Qt(r,n,o);let a=!0;if(t=t.map((function(e){if(e.indexOf("\n")<0){const t=Pt(e);t?e=t.text:(i.errorCallback("no element with id: "+e),a=!1)}return e})),!a)return null;const u=or(e,t,i);return u?dr(e,u):null}function br(e,t,r,n,o,i){r=void 0===r?4:r;const a=t.indices,u=t.elementType,s=void 0===n?t.numElements:n;o=void 0===o?0:o,u||a?void 0!==i?e.drawElementsInstanced(r,s,void 0===u?5123:t.elementType,o,i):e.drawElements(r,s,void 0===u?5123:t.elementType,o):void 0!==i?e.drawArraysInstanced(r,o,s,i):e.drawArrays(r,o,s)}const yr=36161,hr=34041,xr=36096,gr=33306,vr=33071,Er=9729,Fr=[{format:6408,type:5121,min:Er,wrap:vr},{format:hr}],Ar={};Ar[34041]=gr,Ar[6401]=36128,Ar[36168]=36128,Ar[6402]=xr,Ar[33189]=xr,Ar[33190]=xr,Ar[36012]=xr,Ar[35056]=gr,Ar[36013]=gr;const wr={};function Pr(e,t,r,n){const o=36160,i=e.createFramebuffer();e.bindFramebuffer(o,i),r=r||e.drawingBufferWidth,n=n||e.drawingBufferHeight;let a=0;const u={framebuffer:i,attachments:[],width:r,height:n};return(t=t||Fr).forEach((function(t){let i=t.attachment;const s=t.format;let l=t.attachmentPoint||function(e,t){return Ar[e]||Ar[t]}(s,t.internalFormat);if(l||(l=36064+a++),!i)if(function(e){return wr[e]}(s))i=e.createRenderbuffer(),e.bindRenderbuffer(yr,i),e.renderbufferStorage(yr,s,r,n);else{const o=Object.assign({},t);o.width=r,o.height=n,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||Er,o.mag=o.mag||o.minMag||Er,o.wrapS=o.wrapS||o.wrap||vr,o.wrapT=o.wrapT||o.wrap||vr),i=At(e,o)}if(A(0,i))e.framebufferRenderbuffer(o,l,yr,i);else{if(!w(0,i))throw new Error("unknown attachment type");void 0!==t.layer?e.framebufferTextureLayer(o,l,i,t.level||0,t.layer):e.framebufferTexture2D(o,l,t.target||3553,i,t.level||0)}u.attachments.push(i)})),u}function Tr(e,t,r){r=r||36160,t?(e.bindFramebuffer(r,t.framebuffer),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(r,null),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight))}wr[32854]=!0,wr[32855]=!0,wr[36194]=!0,wr[34041]=!0,wr[33189]=!0,wr[6401]=!0,wr[36168]=!0;const _r=/^(.*?)_/;function zr(e,t){ce(e,0);const r=e.getExtension(t);if(r){const n={},o=_r.exec(t)[1],i="_"+o;for(const t in r){const a=r[t],u="function"==typeof a,s=u?o:i;let l=t;t.endsWith(s)&&(l=t.substring(0,t.length-s.length)),void 0!==e[l]?u||e[l]===a||F(l,e[l],a,t):u?e[l]=function(e){return function(){return e.apply(r,arguments)}}(a):(e[l]=a,n[l]=a)}n.constructor={name:r.constructor.name},ce(n,0)}return r}const Sr=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Rr(e){for(let t=0;t<Sr.length;++t)zr(e,Sr[t])}const Ir=[.5,0];let Cr=0,Mr=+new Date;const Ur=document.getElementById("canvasgl"),Br=Ur.getContext("webgl2");Rr(Br);let Lr=At(Br,{src:document.querySelector("img#bazar"),target:Br.TEXTURE_CUBE_MAP},(e=>{console.log("image loaded4")})),kr=At(Br,{src:document.querySelector("img#xiao"),target:Br.TEXTURE_CUBE_MAP},(e=>{console.log("image loaded4")}));const Or=pr(Br,["#version 300 es\n  precision mediump float;\n  in vec2 position;\n  void main() {\n    gl_Position = vec4(position, 0.0, 1.0);\n  }","#version 300 es\nprecision mediump float;\nout vec4 outColor;\n\nprecision highp float;\n#define GLSLIFY 1\nuniform vec2 resolution;\nuniform samplerCube tex_car;\nuniform samplerCube tex_bazar;\nuniform samplerCube tex_xiao;\nuniform vec2 mouse;\nuniform float time;\n\n#define o outColor\n#define FC gl_FragCoord\n#define t time\n#define res resolution\n#define m mouse\n#define rotate2D rot\n\n#define BRICK_SIZE vec3(1.2, 2.5, .65)\n\n#define rnd(x) fract(54321.987 * sin(987.12345 * x))\n// Originally sourced from:\n// http://iquilezles.org/www/articles/distfunctions/distfunctions.htm\n\nfloat sdBox(vec3 position, vec3 dimensions) {\n  vec3 d = abs(position) - dimensions;\n\n  return min(max(d.x, max(d.y,d.z)), 0.0) + length(max(d, 0.0));\n}\n\nmat2 rot(float a){float s=sin(a),c=cos(a);return mat2(c,-s,s,c);}\n\nvoid main(){\nvec2 uv = (FC.xy*2.-res)/res.y;\nfloat i=0.,j,d,s,sc,e=1.,brickId;\nvec3 p, pb;\nfor(;++i<64.&&e>.00001;){\n  p=d*normalize(vec3((FC.xy-.5*res)/res.y,1));\n  \n  pb=p;\n  pb.z+=t*.01;\n  pb.y-=.004;\n  brickId=floor(mod(pb.z/2.,.08)*2./.08);\n  pb.z=mod(pb.z,.08)-.04;\n  pb.zx*=rot(t+p.z*100.);\n  pb.zy*=rot(t*.73+p.z*100.);\n  float brick=sdBox(pb, BRICK_SIZE*.001)-.0001;\n  brick*=.8;\n  \n  p.z+=t*.01;\n  p.z = mod(p.z,2.)-1.;\n  p.y += .8;\n// \tp.x = mod(p.x,2.)-1.;\n  sc=1.;\n\tfor (j=0.;j<10.;j++){\n\t\tp=abs(p);\n  \tp-=vec3(.5+.01*cos(t*0.),2.+.05*sin(t*0.),.5);\n  \tfloat dist = dot(p,p);\n\t\ts=2./clamp(dist,.1,1.);\n\t\tp*=s;\n\t\tsc*=s;\n\t\t\t\t// p.xz*=rotate2D(t*.1);\n\t\tp-=vec3(0.,5.,0.);\n\t}\n  float dd=((length(p)-1.)/sc);\n  d+=e=min(dd,brick);\n  //d+=e=dd;\n}\nvec4 bazar=texture(tex_bazar, pb/BRICK_SIZE*vec3(-1));\nvec4 xiao= texture(tex_xiao , pb/BRICK_SIZE*vec3(-1));\no+=9./i*mix(bazar, xiao, brickId);\no.a=1.;\n}"]),Dr=[{format:Br.RGBA,type:Br.FLOAT,minMag:Br.NEAREST,wrap:Br.CLAMP_TO_EDGE}];Pr(Br,Dr,800,800);const Wr=O(Br,{position:{data:[1,1,1,-1,-1,-1,-1,1],numComponents:2}});let jr,Gr;function $r(e){!function(e,t){t=t||1,t=Math.max(0,t);const r=e.clientWidth*t|0,n=e.clientHeight*t|0;(e.width!==r||e.height!==n)&&(e.width=r,e.height=n)}(Br.canvas),Br.viewport(0,0,Br.canvas.width,Br.canvas.height),jr=Gr?e-Gr:0,Gr=e,Br.useProgram(Or.program),mr(Br,Or,Wr),lr(Or,{tick:Cr,tex_bazar:Lr,tex_xiao:kr,time:(new Date-Mr)/1e3,resolution:[Br.canvas.clientWidth,Br.canvas.clientHeight],mouse:Ir}),Tr(Br,null),br(Br,Wr,Br.TRIANGLE_FAN),Cr++}function Xr(e){Ir[0]=e.clientX/Br.canvas.clientWidth,Ir[1]=1-e.clientY/Br.canvas.clientHeight}function Nr(e){e.preventDefault(),Xr(e.touches[0])}!function e(t){$r(t/1e3),requestAnimationFrame(e)}(0),Ur.addEventListener("mousemove",Xr),Ur.addEventListener("touchstart",Nr,{passive:!1}),Ur.addEventListener("touchmove",Nr,{passive:!1})}();